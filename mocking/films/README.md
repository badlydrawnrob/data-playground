# A basic film API

> Built from this [free film API](https://www.freepublicapis.com/free-movie-api)
> The `json` is MASSIVE. How much of that could've been removed?!

1. `npx json-server film.db`
2. A `--watch` flag will update if `.db` does.
3. You can `GET` from `/films` url.
4. You can `POST` to `/films` url.[^1]
5. You can `GET` from `/films/:id` url.

Used [JQ Playground](https://play.jqlang.org/) to massage the API data (remove the `jq ''` part and change the `tt` id):

```terminal
# get url: https://imdb.iamidiotareyoutoo.com/search?tt=tt20969586
# massage the data with jq: https://jqlang.org/tutorial/
>> jq '. | { title: .short.name, trailer: .short.trailer.embedUrl, summary: .short.description, tags: .short.genre }'

# post a film to json-server (currently `id` must be a string)
curl --request POST \
--url http://localhost:3000/films \
--header 'content-type: application/json' \
--data '{
  "id": "4",
  "title": "Nuovo Cinema Paradiso",
  "trailer": "https://www.imdb.com/video/vi2800655897/",
  "summary": "Salvatore, a famous film director, returns to his hometown for the funeral of the local theater&apos;s film projectionist, Alfredo. He reminisces about his life as a young boy falling in love with cinema.",
  "poster": null,
  "tags": [
    "Drama",
    "Romance"
  ],
  "reviews": null
}'
```

## Reviews

> Here's [an example](https://www.rottentomatoes.com/m/thunderbolts/reviews?type=top_critics) of reviews and [how they're scored](https://www.rottentomatoes.com/about).

The reviews themselves (I don't think) are binary, but they're converted into a [fresh or rotten](https://en.wikipedia.org/wiki/Rotten_Tomatoes#Critics'_aggregate_score) (binary). There's an [interesting comparison](https://www.pretentious-o-meter.co.uk/) between audience scores and critic's scores.

## Images

> Is it wiser to make sure all images are the same type?

Rotten Tomatoes uses `.png`s, `.jpg`, and if you try to save some they download as `ems.SOME-LONG-ID=` as they're generated by a `https://resizing.flixster.com/` API.

## Problems

> The server prefers `String` ids, and will convert (for live server) any
> `Int` `/:id:`s to a string.

Which means if you try to save a new entry with an `Int` id, it'll return a []`Not Found` error](https://stackoverflow.com/a/77801181). I think this is something to do with urls technically being a string (even if a number).

[^1]: If no `"id"` is supplied, a random id will be generated.